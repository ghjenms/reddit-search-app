{"version":3,"sources":["redditapi.js","index.js"],"names":["search","searchTerm","sortBy","searchLimit","fetch","then","res","json","data","children","map","catch","console","log","err","searchForm","document","getElementById","searchInput","addEventListener","value","querySelector","showMessage","reddit","results","output","forEach","image","post","preview","images","source","url","title","truncateText","selftext","subreddit","score","innerHTML","e","preventDefault","message","className","div","createElement","appendChild","createTextNode","searchContainer","insertBefore","setTimeout","remove","text","limit","shortened","indexOf","substring"],"mappings":"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","file":"RedditSearchApp.628aadab.map","sourceRoot":"..","sourcesContent":["export default {\r\n\tsearch: function(searchTerm, sortBy, searchLimit) {\r\n\t\treturn fetch(`http://www.reddit.com/search.json?q=${searchTerm}&sort=${sortBy}&limit=${searchLimit}`)\r\n\t\t.then(res => res.json())\r\n\t\t.then(data => {\r\n\t\t\treturn data.data.children.map(data => data.data)\r\n\t\t})\r\n\t\t.catch(err => console.log(err));\r\n\t}\r\n};","import reddit from './redditapi';\r\n\r\nconst searchForm = document.getElementById('search-form');\r\nconst searchInput = document.getElementById('search-input');\r\n\r\n// Form EventListener \r\nsearchForm.addEventListener('submit', e => {\r\n\r\n\t// Get search term\r\n\tconst searchTerm = searchInput.value;\r\n\r\n\t// Get sort\r\n\tconst sortBy = document.querySelector('input[name=\"sortby\"]:checked').value;\r\n\t\r\n\t// Get limit\r\n\tconst searchLimit = document.getElementById('limit').value;\r\n\r\n\t// Check input\r\n\tif (searchTerm === '') {\r\n\r\n\t\t// Show message\r\n\t\tshowMessage('Please add a search term', 'alert-danger');\r\n\t}\r\n\r\n\t// Clear input\r\n\tsearchInput.value = \"\";\r\n\r\n\t// Search Reddit\r\n\treddit.search(searchTerm, sortBy, searchLimit)\r\n\t.then(results => {\r\n\t\tconsole.log(results);\r\n\t\tlet output = '<div class=\"card-columns\">';\r\n\r\n\t\t// Loop through posts\r\n\t\tresults.forEach(post => {\r\n\r\n\t\t\t// Check for image\r\n\t\t\tconst image = post.preview ? post.preview.images[0].source.url : 'https://cdn.comparitech.com/wp-content/uploads/2017/08/reddit-1.jpg';\r\n\r\n\t\t\t//Output\r\n\t\t\toutput += `\r\n\t\t\t<div class=\"card bg\">\r\n  \t\t\t\t<img class=\"card-img-top\" src=\"${image}\" alt=\"Card image cap\"/>\r\n  \t\t\t\t<div class=\"card-body\">\r\n    \t\t\t\t<h5 class=\"card-title\">${post.title}</h5>\r\n    \t\t\t\t<p class=\"card-text\">${truncateText(post.selftext, 100)}</p>\r\n    \t\t\t\t<a href=\"${post.url}\" target=\"_blank\"class=\"btn btn-primary\">Read More</a>\r\n\t\t\t\t\t<hr>\r\n\t\t\t\t\t<span class=\"badge badge-secondary\">Subreddit: ${post.subreddit}</span> \r\n\t\t\t\t\t<span class=\"badge badge-dark\">Score: ${post.score}</span> \r\n  \t\t\t\t</div>\r\n\t\t\t</div>\t\r\n\t\t\t\t`;\r\n\t\t});\r\n\t\toutput += '</div>';\r\n\t\tdocument.getElementById('results').innerHTML = output;\r\n\t});\r\n\r\n\te.preventDefault();\r\n});\r\n\r\n// Show Message\r\nfunction showMessage(message, className) {\r\n\r\n\t// Create div\r\n\tconst div = document.createElement('div');\r\n\r\n\t// Add classes\r\n\tdiv.className = `alert ${className}`;\r\n\r\n\t// Add text\r\n\tdiv.appendChild(document.createTextNode(message));\r\n\r\n\t// Get parent container\r\n\tconst searchContainer = document.getElementById('search-container'); \r\n\r\n\t// Get search\r\n\tconst search = document.getElementById('search');\r\n\r\n\t// Insert message\r\n\tsearchContainer.insertBefore(div, search);\r\n\r\n\t// Time out alert\r\n\tsetTimeout(() => document.querySelector('.alert').remove(), 3000);\r\n}\r\n\r\n// Truncate text \r\nfunction truncateText(text, limit) {\r\n\tconst shortened = text.indexOf(' ', limit);\r\n\tif (shortened == -1) return text;\r\n\treturn text.substring(0, shortened);\r\n}"]}